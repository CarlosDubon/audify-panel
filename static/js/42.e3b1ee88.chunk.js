(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[42,51],{480:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(456),c=n(478),l=n(9);var i=Object(c.GoogleApiWrapper)({apiKey:"AIzaSyDAKFbkF15bYuJsKQMjb6M6FBGSVMH9ims"})((e=>{const[t,n]=Object(r.useState)(),[a,i]=Object(r.useState)();Object(r.useEffect)((()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){n({lat:e.coords.latitude,long:e.coords.longitude})})):n({})}),[]);return t?Object(l.jsx)("div",{style:{position:"relative",height:300},children:Object(l.jsx)(c.Map,{google:e.google,zoom:20,initialCenter:{lat:t.lat,lng:t.long},onClick:(t,n,r)=>{const{latLng:a}=r,c=a.lat(),l=a.lng();i({title:"",name:"",position:{lat:c,lng:l}}),e.onSelect(c,l)},children:a&&Object(l.jsx)(c.Marker,{position:a.position})})}):Object(l.jsx)(l.Fragment,{})})),o=n(479);var s=e=>{const[t,n]=Object(r.useState)(""),{getRootProps:a,getInputProps:c,isDragActive:i}=Object(o.a)({accept:"audio/mpeg",onDrop:t=>{e.setFile(t[0]),n(t[0].name)}});return Object(l.jsx)("div",{children:Object(l.jsxs)("div",{...a({style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",borderWidth:"2px",borderRadius:"2px",borderColor:"#eeeeee",borderStyle:"dashed",backgroundColor:"#fafafa",color:"#bdbdbd",outline:"none",transition:"border .24s ease-in-out"}}),children:[Object(l.jsx)("input",{...c()}),t?Object(l.jsx)("p",{children:t}):Object(l.jsx)("p",{children:"Drop the files here ..."})]})})},d=n(112),u=n(464),b=n.n(u),m=n(108);t.default=({place:e={_id:"",name:"",latitude:"",longitude:"",radius:0},...t})=>{const n=Object(m.c)((e=>e.user.token)),[c,o]=Object(r.useState)({name:e.name,lat:e.latitude,lng:e.longitude,radius:e.radius}),[u,j]=Object(r.useState)();return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)(a.r,{className:"mb-4",children:[t.edit||Object(l.jsx)(a.v,{children:" Agregar lugar "}),Object(l.jsx)(a.s,{children:Object(l.jsxs)(a.P,{children:[Object(l.jsxs)("div",{className:"row",children:[Object(l.jsxs)("div",{className:"col-md-12 mb-3",children:[Object(l.jsx)(a.U,{htmlFor:"place-name",children:"Nombre: "}),Object(l.jsx)(a.R,{value:c.name,onChange:e=>o({...c,name:e.target.value}),type:"text",id:"place-name",placeholder:"Ingresar nombre del lugar"})]}),Object(l.jsxs)("div",{className:"col-md-12 mt-3",children:[Object(l.jsx)("div",{children:"Selecciona el sonido a reproducir:"}),Object(l.jsx)("div",{className:"mt-3",children:Object(l.jsx)(s,{setFile:j})})]}),Object(l.jsx)("div",{className:"col-md-12 mt-3",children:"Selecciona la ubicaci\xf3n:"}),Object(l.jsx)("div",{className:"col-md-8 mt-3",children:Object(l.jsx)(a.G,{children:Object(l.jsx)(i,{onSelect:(e,t)=>{o({...c,lat:e,lng:t})}})})}),Object(l.jsx)("div",{className:"col-md-4",children:Object(l.jsxs)("div",{className:"col-md-12 mt-3",children:[Object(l.jsxs)("div",{className:"mb-3",children:[Object(l.jsx)(a.U,{htmlFor:"place-lat",children:"Latitud: "}),Object(l.jsx)(a.R,{value:c.lat,type:"text",id:"place-lat",readOnly:!0})]}),Object(l.jsxs)("div",{className:"mb-3",children:[Object(l.jsx)(a.U,{htmlFor:"place-long",children:"Longitud: "}),Object(l.jsx)(a.R,{readOnly:!0,value:c.lng,type:"text",id:"place-long"})]}),Object(l.jsxs)("div",{className:"mb-3",children:[Object(l.jsx)(a.U,{htmlFor:"place-long",children:"Radio de acci\xf3n (metros): "}),Object(l.jsx)(a.R,{value:c.radius,onChange:e=>o({...c,radius:parseFloat(e.target.value)}),type:"number",min:1,id:"place-long"})]})]})})]}),Object(l.jsx)("div",{className:"d-flex justify-content-end",children:Object(l.jsx)(a.n,{onClick:()=>{d.b.promise(t.edit?(async()=>{try{const r=new FormData;if(c.name&&r.append("name",c.name),c.lat&&r.append("latitude",c.lat),c.lng&&r.append("longitude",c.lng),u&&r.append("sound",u),c.radius>=1&&r.append("radius",c.radius),200!==(await b.a.put("".concat("http://147.182.171.70/api","/speaker/update/").concat(e._id),r,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(n)}})).status)throw"Hubo un error al actualizar";t.onClose()}catch(r){if(r)throw r.message;throw"Error interno, por favor intente m\xe1s tarde."}})():(async()=>{try{if(!(""!==c.name&&""!==c.lat&&""!==c.lng&&u&&c.radius>=1))throw console.log(c),"Existen campos vac\xedos, por favor llena todo el formulario";{const e=new FormData;e.append("name",c.name),e.append("latitude",c.lat),e.append("longitude",c.lng),e.append("sound",u),e.append("radius",c.radius),201===(await b.a.post("".concat("http://147.182.171.70/api","/speaker/register"),e,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(n)}})).status&&t.history.replace("/dashboard")}}catch(e){if(e)throw e.message;throw"Error interno, por favor intente m\xe1s tarde."}})(),{loading:"Guardando...",success:"Guardado exitosamente",error:e=>e})},children:"Guardar"})})]})})]})})}},503:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.confirmAlert=function(e){document.body.classList.add("react-confirm-alert-body-element"),function(){if(document.getElementById("react-confirm-alert-firm-svg"))return;var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"feGaussianBlur");t.setAttribute("stdDeviation","0.3");var n=document.createElementNS(e,"filter");n.setAttribute("id","gaussian-blur"),n.appendChild(t);var r=document.createElementNS(e,"svg");r.setAttribute("id","react-confirm-alert-firm-svg"),r.setAttribute("class","react-confirm-alert-svg"),r.appendChild(n),document.body.appendChild(r)}(),function(e){var t=document.getElementById("react-confirm-alert");t||(document.body.children[0].classList.add("react-confirm-alert-blur"),(t=document.createElement("div")).id="react-confirm-alert",document.body.appendChild(t)),(0,s.render)(i.default.createElement(m,e),t)}(e)};var l=n(0),i=d(l),o=d(n(42)),s=n(60);function d(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var m=(a=r=function(e){function t(){var e,n,r;u(this,t);for(var a=arguments.length,c=Array(a),l=0;l<a;l++)c[l]=arguments[l];return n=r=b(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.handleClickButton=function(e){e.onClick&&e.onClick(),r.close()},r.handleClickOverlay=function(e){var t=r.props,n=t.closeOnClickOutside,a=t.onClickOutside,c=e.target===r.overlay;n&&c&&(a(),r.close())},r.close=function(){var e=r.props.afterClose;f(),p(),j(e)},r.keyboardClose=function(e){var t=r.props,n=t.closeOnEscape,a=t.onKeypressEscape,c=27===e.keyCode;n&&c&&(a(e),r.close())},r.componentDidMount=function(){document.addEventListener("keydown",r.keyboardClose,!1)},r.componentWillUnmount=function(){document.removeEventListener("keydown",r.keyboardClose,!1),r.props.willUnmount()},r.renderCustomUI=function(){var e=r.props,t=e.title,n=e.message,a=e.buttons;return(0,e.customUI)({title:t,message:n,buttons:a,onClose:r.close})},b(r,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),c(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.title,r=t.message,a=t.buttons,c=t.childrenElement,l=t.customUI,o=t.overlayClassName;return i.default.createElement("div",{className:"react-confirm-alert-overlay "+o,ref:function(t){return e.overlay=t},onClick:this.handleClickOverlay},i.default.createElement("div",{className:"react-confirm-alert"},l?this.renderCustomUI():i.default.createElement("div",{className:"react-confirm-alert-body"},n&&i.default.createElement("h1",null,n),r,c(),i.default.createElement("div",{className:"react-confirm-alert-button-group"},a.map((function(t,n){return i.default.createElement("button",{key:n,onClick:function(){return e.handleClickButton(t)},className:t.className},t.label)}))))))}}]),t}(l.Component),r.propTypes={title:o.default.string,message:o.default.string,buttons:o.default.array.isRequired,childrenElement:o.default.func,customUI:o.default.func,closeOnClickOutside:o.default.bool,closeOnEscape:o.default.bool,willUnmount:o.default.func,afterClose:o.default.func,onClickOutside:o.default.func,onKeypressEscape:o.default.func,overlayClassName:o.default.string},r.defaultProps={buttons:[{label:"Cancel",onClick:function(){return null},className:null},{label:"Confirm",onClick:function(){return null},className:null}],childrenElement:function(){return null},closeOnClickOutside:!0,closeOnEscape:!0,willUnmount:function(){return null},afterClose:function(){return null},onClickOutside:function(){return null},onKeypressEscape:function(){return null}},a);function j(e){var t=document.getElementById("react-confirm-alert-firm-svg");t&&t.parentNode.removeChild(t),document.body.children[0].classList.remove("react-confirm-alert-blur"),e()}function p(){var e=document.getElementById("react-confirm-alert");e&&((0,s.unmountComponentAtNode)(e),e.parentNode.removeChild(e))}function f(){document.body.classList.remove("react-confirm-alert-body-element")}t.default=m},525:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(456),c=n(464),l=n.n(c),i=n(108),o=(n(503),n(112)),s=n(480),d=n(9);t.default=()=>{const e=Object(i.c)((e=>e.user.token)),[t,n]=Object(r.useState)([]),[c,u]=Object(r.useState)({}),[b,m]=Object(r.useState)(!1),[j,p]=Object(r.useState)({}),[f,h]=Object(r.useState)(!1);Object(r.useEffect)((()=>{x()}),[]);const O=()=>{u({}),x(),m(!1)},g=()=>{p({}),x(),h(!1)},x=async()=>{try{let t=await l.a.get("".concat("http://147.182.171.70/api","/speaker"),{headers:{Authorization:"Bearer ".concat(e)}});n(t.data)}catch(t){}};return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(a.r,{className:"mb-4",children:[Object(d.jsx)(a.v,{children:"Todos los lugares"}),Object(d.jsx)(a.s,{children:Object(d.jsxs)(a.Cb,{children:[Object(d.jsx)(a.Gb,{children:Object(d.jsxs)(a.Ib,{children:[Object(d.jsx)(a.Hb,{children:"Nombre"}),Object(d.jsx)(a.Hb,{children:"Longitud"}),Object(d.jsx)(a.Hb,{children:"Latitud"}),Object(d.jsx)(a.Hb,{children:"Audio"}),Object(d.jsx)(a.Hb,{children:"Radio de acci\xf3n"}),Object(d.jsx)(a.Hb,{children:"Opciones"})]})}),Object(d.jsx)(a.Db,{children:t.map((e=>Object(d.jsxs)(a.Ib,{children:[Object(d.jsx)(a.Fb,{style:{verticalAlign:"middle",textAlign:"center",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.name}),Object(d.jsx)(a.Fb,{style:{verticalAlign:"middle",textAlign:"center",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.longitude}),Object(d.jsx)(a.Fb,{style:{verticalAlign:"middle",textAlign:"center",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.latitude}),Object(d.jsx)(a.Fb,{style:{verticalAlign:"middle",textAlign:"center"},children:Object(d.jsx)("audio",{controls:!0,src:e.sound.startsWith("/upload")?"".concat("http://147.182.171.70").concat(e.sound):e.sound})}),Object(d.jsxs)(a.Fb,{style:{verticalAlign:"middle",textAlign:"center",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[e.radius," m"]}),Object(d.jsx)(a.Fb,{style:{verticalAlign:"middle",textAlign:"center"},children:Object(d.jsxs)(a.o,{role:"group","aria-label":"Basic example",children:[Object(d.jsx)(a.n,{onClick:()=>{p(e),h(!0)},className:"text-white",color:"danger",children:"Eliminar"}),Object(d.jsx)(a.n,{onClick:()=>{u(e),m(!0)},className:"text-white",color:"info",children:"Editar"})]})})]},e._id)))})]})})]}),Object(d.jsxs)(a.hb,{visible:b,size:"xl",onDismiss:()=>m(!1),children:[Object(d.jsx)(a.kb,{onDismiss:()=>O(),children:Object(d.jsx)(a.lb,{children:"Editar lugar"})}),Object(d.jsx)(a.ib,{children:Object(d.jsx)(s.default,{place:c,edit:!0,onClose:()=>O()})})]}),Object(d.jsxs)(a.hb,{visible:f,onDismiss:()=>h(!1),children:[Object(d.jsx)(a.kb,{onDismiss:()=>g(),children:Object(d.jsx)(a.lb,{children:" Eliminar lugar "})}),Object(d.jsx)(a.ib,{children:Object(d.jsxs)("p",{children:["\xbfEst\xe1s seguro/a de eliminar ",j.name,"? Esta acci\xf3n es irreversible."]})}),Object(d.jsx)(a.jb,{children:Object(d.jsx)(a.n,{onClick:async()=>{await(async t=>{try{200===(await l.a.delete("".concat("http://147.182.171.70/api","/speaker/delete/").concat(t),{headers:{Authorization:"Bearer ".concat(e)}})).status&&o.b.success("Acci\xf3n realizada con exito")}catch(n){console.log(n)}})(j._id),g()},color:"danger",className:"text-white",children:"Confirmar"})})]})]})}}}]);
//# sourceMappingURL=42.e3b1ee88.chunk.js.map