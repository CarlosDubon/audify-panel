(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[51],{480:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(456),c=a(478),s=a(9);var i=Object(c.GoogleApiWrapper)({apiKey:"AIzaSyDAKFbkF15bYuJsKQMjb6M6FBGSVMH9ims"})((e=>{const[t,a]=Object(n.useState)(),[r,i]=Object(n.useState)();Object(n.useEffect)((()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){a({lat:e.coords.latitude,long:e.coords.longitude})})):a({})}),[]);return t?Object(s.jsx)("div",{style:{position:"relative",height:300},children:Object(s.jsx)(c.Map,{google:e.google,zoom:20,initialCenter:{lat:t.lat,lng:t.long},onClick:(t,a,n)=>{const{latLng:r}=n,c=r.lat(),s=r.lng();i({title:"",name:"",position:{lat:c,lng:s}}),e.onSelect(c,s)},children:r&&Object(s.jsx)(c.Marker,{position:r.position})})}):Object(s.jsx)(s.Fragment,{})})),o=a(479);var l=e=>{const[t,a]=Object(n.useState)(""),{getRootProps:r,getInputProps:c,isDragActive:i}=Object(o.a)({accept:"audio/mpeg",onDrop:t=>{e.setFile(t[0]),a(t[0].name)}});return Object(s.jsx)("div",{children:Object(s.jsxs)("div",{...r({style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",borderWidth:"2px",borderRadius:"2px",borderColor:"#eeeeee",borderStyle:"dashed",backgroundColor:"#fafafa",color:"#bdbdbd",outline:"none",transition:"border .24s ease-in-out"}}),children:[Object(s.jsx)("input",{...c()}),t?Object(s.jsx)("p",{children:t}):Object(s.jsx)("p",{children:"Drop the files here ..."})]})})},d=a(112),j=a(464),p=a.n(j),u=a(108);t.default=({place:e={_id:"",name:"",latitude:"",longitude:"",radius:0},...t})=>{const a=Object(u.c)((e=>e.user.token)),[c,o]=Object(n.useState)({name:e.name,lat:e.latitude,lng:e.longitude,radius:e.radius}),[j,m]=Object(n.useState)();return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)(r.r,{className:"mb-4",children:[t.edit||Object(s.jsx)(r.v,{children:" Agregar lugar "}),Object(s.jsx)(r.s,{children:Object(s.jsxs)(r.P,{children:[Object(s.jsxs)("div",{className:"row",children:[Object(s.jsxs)("div",{className:"col-md-12 mb-3",children:[Object(s.jsx)(r.U,{htmlFor:"place-name",children:"Nombre: "}),Object(s.jsx)(r.R,{value:c.name,onChange:e=>o({...c,name:e.target.value}),type:"text",id:"place-name",placeholder:"Ingresar nombre del lugar"})]}),Object(s.jsxs)("div",{className:"col-md-12 mt-3",children:[Object(s.jsx)("div",{children:"Selecciona el sonido a reproducir:"}),Object(s.jsx)("div",{className:"mt-3",children:Object(s.jsx)(l,{setFile:m})})]}),Object(s.jsx)("div",{className:"col-md-12 mt-3",children:"Selecciona la ubicaci\xf3n:"}),Object(s.jsx)("div",{className:"col-md-8 mt-3",children:Object(s.jsx)(r.G,{children:Object(s.jsx)(i,{onSelect:(e,t)=>{o({...c,lat:e,lng:t})}})})}),Object(s.jsx)("div",{className:"col-md-4",children:Object(s.jsxs)("div",{className:"col-md-12 mt-3",children:[Object(s.jsxs)("div",{className:"mb-3",children:[Object(s.jsx)(r.U,{htmlFor:"place-lat",children:"Latitud: "}),Object(s.jsx)(r.R,{value:c.lat,type:"text",id:"place-lat",readOnly:!0})]}),Object(s.jsxs)("div",{className:"mb-3",children:[Object(s.jsx)(r.U,{htmlFor:"place-long",children:"Longitud: "}),Object(s.jsx)(r.R,{readOnly:!0,value:c.lng,type:"text",id:"place-long"})]}),Object(s.jsxs)("div",{className:"mb-3",children:[Object(s.jsx)(r.U,{htmlFor:"place-long",children:"Radio de acci\xf3n (metros): "}),Object(s.jsx)(r.R,{value:c.radius,onChange:e=>o({...c,radius:parseFloat(e.target.value)}),type:"number",min:1,id:"place-long"})]})]})})]}),Object(s.jsx)("div",{className:"d-flex justify-content-end",children:Object(s.jsx)(r.n,{onClick:()=>{d.b.promise(t.edit?(async()=>{try{const n=new FormData;if(c.name&&n.append("name",c.name),c.lat&&n.append("latitude",c.lat),c.lng&&n.append("longitude",c.lng),j&&n.append("sound",j),c.radius>=1&&n.append("radius",c.radius),200!==(await p.a.put("".concat("http://147.182.171.70/api","/speaker/update/").concat(e._id),n,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(a)}})).status)throw"Hubo un error al actualizar";t.onClose()}catch(n){if(n)throw n.message;throw"Error interno, por favor intente m\xe1s tarde."}})():(async()=>{try{if(!(""!==c.name&&""!==c.lat&&""!==c.lng&&j&&c.radius>=1))throw console.log(c),"Existen campos vac\xedos, por favor llena todo el formulario";{const e=new FormData;e.append("name",c.name),e.append("latitude",c.lat),e.append("longitude",c.lng),e.append("sound",j),e.append("radius",c.radius),201===(await p.a.post("".concat("http://147.182.171.70/api","/speaker/register"),e,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(a)}})).status&&t.history.replace("/dashboard")}}catch(e){if(e)throw e.message;throw"Error interno, por favor intente m\xe1s tarde."}})(),{loading:"Guardando...",success:"Guardado exitosamente",error:e=>e})},children:"Guardar"})})]})})]})})}}}]);
//# sourceMappingURL=51.82284753.chunk.js.map